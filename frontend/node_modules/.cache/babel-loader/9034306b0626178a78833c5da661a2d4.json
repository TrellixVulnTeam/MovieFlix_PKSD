{"ast":null,"code":"var _jsxFileName = \"/home/marina/Desktop/MovieFlix/src/pages/Movies/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport MovieCard from \"../../components/MovieCard\";\nimport Filter from \"./Filter\";\nimport { requestBackend } from \"../../util/requests\";\nimport Pagination from \"../../components/Pagination\";\nimport \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Movies = () => {\n  _s();\n\n  const [movies, setMovies] = useState();\n  const [controlComponentsData, setControlComponentsData] = useState({\n    filterData: {\n      genre: null\n    },\n    activePage: 0\n  });\n\n  const handleSubmitFilter = data => {\n    setControlComponentsData({\n      filterData: data,\n      activePage: 0\n    });\n  };\n\n  const handlePageChange = pageNumber => {\n    setControlComponentsData({\n      activePage: pageNumber,\n      filterData: controlComponentsData.filterData\n    });\n  };\n\n  const getGenres = useCallback(() => {\n    var _controlComponentsDat;\n\n    const params = {\n      url: \"/movies\",\n      withCredentials: true,\n      params: {\n        page: controlComponentsData.activePage,\n        size: 4,\n        genre: controlComponentsData.filterData.genre,\n        genreId: (_controlComponentsDat = controlComponentsData.filterData.genre) === null || _controlComponentsDat === void 0 ? void 0 : _controlComponentsDat.id\n      }\n    };\n    requestBackend(params).then(response => {\n      setMovies(response.data);\n    });\n  }, [controlComponentsData]);\n  useEffect(() => {\n    getGenres();\n  }, [getGenres]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"movies-container\",\n    children: [/*#__PURE__*/_jsxDEV(Filter, {\n      onSubmitFilter: handleSubmitFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: movies === null || movies === void 0 ? void 0 : movies.content.map(movie => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"movies-list col-sm-6 col-lg-6 col-xl-3\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/movies/${movie.id}`,\n          children: /*#__PURE__*/_jsxDEV(MovieCard, {\n            movie: movie\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)\n      }, movie.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      pageCount: movies ? movies.totalPages : 0,\n      pageRangeDisplayed: 3,\n      onChange: handlePageChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Movies, \"QAw9nz1LTcDaz1Y7Qr2MOSsjezQ=\");\n\n_c = Movies;\nexport default Movies;\n\nvar _c;\n\n$RefreshReg$(_c, \"Movies\");","map":{"version":3,"names":["useCallback","useEffect","useState","Link","MovieCard","Filter","requestBackend","Pagination","Movies","movies","setMovies","controlComponentsData","setControlComponentsData","filterData","genre","activePage","handleSubmitFilter","data","handlePageChange","pageNumber","getGenres","params","url","withCredentials","page","size","genreId","id","then","response","content","map","movie","totalPages"],"sources":["/home/marina/Desktop/MovieFlix/src/pages/Movies/index.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport MovieCard from \"../../components/MovieCard\";\nimport Filter, { GenreFilterData } from \"./Filter\";\nimport { Movie } from \"../../types/movie\";\nimport { requestBackend } from \"../../util/requests\";\nimport { AxiosRequestConfig } from \"axios\";\nimport Pagination from \"../../components/Pagination\";\nimport { SpringPage } from \"../../types/springPage\";\n\nimport \"./styles.css\";\n\ntype ControlComponentsData = {\n  activePage: number;\n  filterData: GenreFilterData;\n};\n\nconst Movies = () => {\n  const [movies, setMovies] = useState<SpringPage<Movie>>();\n\n  const [controlComponentsData, setControlComponentsData] =\n    useState<ControlComponentsData>({\n      filterData: { genre: null },\n      activePage: 0,\n    });\n\n  const handleSubmitFilter = (data: GenreFilterData) => {\n    setControlComponentsData({ filterData: data, activePage: 0 });\n  };\n\n  const handlePageChange = (pageNumber: number) => {\n    setControlComponentsData({\n      activePage: pageNumber,\n      filterData: controlComponentsData.filterData,\n    });\n  };\n\n  const getGenres = useCallback(() => {\n    const params: AxiosRequestConfig = {\n      url: \"/movies\",\n      withCredentials: true,\n      params: {\n        page: controlComponentsData.activePage,\n        size: 4,\n        genre: controlComponentsData.filterData.genre,\n        genreId: controlComponentsData.filterData.genre?.id,\n      },\n    };\n    requestBackend(params).then((response) => {\n      setMovies(response.data);\n    });\n  }, [controlComponentsData]);\n\n  useEffect(() => {\n    getGenres();\n  }, [getGenres]);\n\n  return (\n    <div className=\"movies-container\">\n      <Filter onSubmitFilter={handleSubmitFilter} />\n      <div className=\"row\">\n        {movies?.content.map((movie: Movie) => (\n          <div\n            className=\"movies-list col-sm-6 col-lg-6 col-xl-3\"\n            key={movie.id}\n          >\n            <Link to={`/movies/${movie.id}`}>\n              <MovieCard movie={movie} />\n            </Link>\n          </div>\n        ))}\n      </div>\n      <Pagination\n        pageCount={movies ? movies.totalPages : 0}\n        pageRangeDisplayed={3}\n        onChange={handlePageChange}\n      />\n    </div>\n  );\n};\n\nexport default Movies;\n"],"mappings":";;;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,MAAP,MAAwC,UAAxC;AAEA,SAASC,cAAT,QAA+B,qBAA/B;AAEA,OAAOC,UAAP,MAAuB,6BAAvB;AAGA,OAAO,cAAP;;;AAOA,MAAMC,MAAM,GAAG,MAAM;EAAA;;EACnB,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBR,QAAQ,EAApC;EAEA,MAAM,CAACS,qBAAD,EAAwBC,wBAAxB,IACJV,QAAQ,CAAwB;IAC9BW,UAAU,EAAE;MAAEC,KAAK,EAAE;IAAT,CADkB;IAE9BC,UAAU,EAAE;EAFkB,CAAxB,CADV;;EAMA,MAAMC,kBAAkB,GAAIC,IAAD,IAA2B;IACpDL,wBAAwB,CAAC;MAAEC,UAAU,EAAEI,IAAd;MAAoBF,UAAU,EAAE;IAAhC,CAAD,CAAxB;EACD,CAFD;;EAIA,MAAMG,gBAAgB,GAAIC,UAAD,IAAwB;IAC/CP,wBAAwB,CAAC;MACvBG,UAAU,EAAEI,UADW;MAEvBN,UAAU,EAAEF,qBAAqB,CAACE;IAFX,CAAD,CAAxB;EAID,CALD;;EAOA,MAAMO,SAAS,GAAGpB,WAAW,CAAC,MAAM;IAAA;;IAClC,MAAMqB,MAA0B,GAAG;MACjCC,GAAG,EAAE,SAD4B;MAEjCC,eAAe,EAAE,IAFgB;MAGjCF,MAAM,EAAE;QACNG,IAAI,EAAEb,qBAAqB,CAACI,UADtB;QAENU,IAAI,EAAE,CAFA;QAGNX,KAAK,EAAEH,qBAAqB,CAACE,UAAtB,CAAiCC,KAHlC;QAINY,OAAO,2BAAEf,qBAAqB,CAACE,UAAtB,CAAiCC,KAAnC,0DAAE,sBAAwCa;MAJ3C;IAHyB,CAAnC;IAUArB,cAAc,CAACe,MAAD,CAAd,CAAuBO,IAAvB,CAA6BC,QAAD,IAAc;MACxCnB,SAAS,CAACmB,QAAQ,CAACZ,IAAV,CAAT;IACD,CAFD;EAGD,CAd4B,EAc1B,CAACN,qBAAD,CAd0B,CAA7B;EAgBAV,SAAS,CAAC,MAAM;IACdmB,SAAS;EACV,CAFQ,EAEN,CAACA,SAAD,CAFM,CAAT;EAIA,oBACE;IAAK,SAAS,EAAC,kBAAf;IAAA,wBACE,QAAC,MAAD;MAAQ,cAAc,EAAEJ;IAAxB;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAK,SAAS,EAAC,KAAf;MAAA,UACGP,MADH,aACGA,MADH,uBACGA,MAAM,CAAEqB,OAAR,CAAgBC,GAAhB,CAAqBC,KAAD,iBACnB;QACE,SAAS,EAAC,wCADZ;QAAA,uBAIE,QAAC,IAAD;UAAM,EAAE,EAAG,WAAUA,KAAK,CAACL,EAAG,EAA9B;UAAA,uBACE,QAAC,SAAD;YAAW,KAAK,EAAEK;UAAlB;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA;MAJF,GAEOA,KAAK,CAACL,EAFb;QAAA;QAAA;QAAA;MAAA,QADD;IADH;MAAA;MAAA;MAAA;IAAA,QAFF,eAcE,QAAC,UAAD;MACE,SAAS,EAAElB,MAAM,GAAGA,MAAM,CAACwB,UAAV,GAAuB,CAD1C;MAEE,kBAAkB,EAAE,CAFtB;MAGE,QAAQ,EAAEf;IAHZ;MAAA;MAAA;MAAA;IAAA,QAdF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAsBD,CA9DD;;GAAMV,M;;KAAAA,M;AAgEN,eAAeA,MAAf"},"metadata":{},"sourceType":"module"}