{"ast":null,"code":"var _jsxFileName = \"/home/marina/Desktop/MovieFlix/src/pages/MovieDetails/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport MovieReview from \"../../components/MovieReview\";\nimport ReviewForm from \"../../components/ReviewForm\";\nimport { hasAnyRoles, requestBackend } from \"../../util/requests\";\nimport MovieSynopsis from \"./MovieSynopsis\";\nimport \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MovieDetails = () => {\n  _s();\n\n  const {\n    movieId\n  } = useParams();\n  const [movie, setMovie] = useState();\n  const [reviews, setReviews] = useState([]); //get movie\n\n  useEffect(() => {\n    const config = {\n      method: \"GET\",\n      url: `/movies/${movieId}`,\n      withCredentials: true\n    };\n    requestBackend(config).then(response => {\n      if (response.data !== undefined) {\n        setMovie(response.data);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [movieId]); //get reviews\n\n  useEffect(() => {\n    const config = {\n      method: \"GET\",\n      url: `/movies/${movieId}/reviews`,\n      withCredentials: true\n    };\n    requestBackend(config).then(response => {\n      setReviews(response.data);\n    });\n  }, [movieId]);\n\n  const handleInsertReview = review => {\n    const clone = [...reviews];\n    clone.push(review);\n    setReviews(clone);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"review-list\",\n    children: [/*#__PURE__*/_jsxDEV(MovieSynopsis, {\n      movie: movie\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), hasAnyRoles([\"ROLE_MEMBER\"]) && /*#__PURE__*/_jsxDEV(ReviewForm, {\n      movieId: movieId,\n      onInsertReview: handleInsertReview\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"base-card\",\n      children: reviews === null || reviews === void 0 ? void 0 : reviews.map(review => {\n        return /*#__PURE__*/_jsxDEV(MovieReview, {\n          review: review\n        }, review.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 18\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MovieDetails, \"wxiNYGKoqYr/bEmspQ4qmSB0Ri8=\", false, function () {\n  return [useParams];\n});\n\n_c = MovieDetails;\nexport default MovieDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieDetails\");","map":{"version":3,"names":["useEffect","useState","useParams","MovieReview","ReviewForm","hasAnyRoles","requestBackend","MovieSynopsis","MovieDetails","movieId","movie","setMovie","reviews","setReviews","config","method","url","withCredentials","then","response","data","undefined","catch","error","console","log","handleInsertReview","review","clone","push","map","id"],"sources":["/home/marina/Desktop/MovieFlix/src/pages/MovieDetails/index.tsx"],"sourcesContent":["import { AxiosRequestConfig } from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport MovieReview from \"../../components/MovieReview\";\nimport ReviewForm from \"../../components/ReviewForm\";\nimport { Movie } from \"../../types/movie\";\nimport { Review } from \"../../types/review\";\nimport { hasAnyRoles, requestBackend } from \"../../util/requests\";\nimport MovieSynopsis from \"./MovieSynopsis\";\n\nimport \"./styles.css\";\n\ntype urlParams = {\n  movieId: string;\n};\n\nconst MovieDetails = () => {\n  const { movieId } = useParams<urlParams>();\n  const [movie, setMovie] = useState<Movie>();\n  const [reviews, setReviews] = useState<Review[]>([]);\n\n  //get movie\n  useEffect(() => {\n    const config: AxiosRequestConfig = {\n      method: \"GET\",\n      url: `/movies/${movieId}`,\n      withCredentials: true,\n    };\n    requestBackend(config)\n      .then((response) => {\n        if (response.data !== undefined) {\n          setMovie(response.data);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, [movieId]);\n\n  //get reviews\n  useEffect(() => {\n    const config: AxiosRequestConfig = {\n      method: \"GET\",\n      url: `/movies/${movieId}/reviews`,\n      withCredentials: true,\n    };\n    requestBackend(config).then((response) => {\n      setReviews(response.data);\n    });\n  }, [movieId]);\n\n  const handleInsertReview = (review: Review) => {\n    const clone = [...reviews];\n    clone.push(review);\n    setReviews(clone);\n  };\n\n  return (\n    <div className=\"review-list\">\n      <MovieSynopsis movie={movie as Movie} />\n      {hasAnyRoles([\"ROLE_MEMBER\"]) && (\n        <ReviewForm movieId={movieId} onInsertReview={handleInsertReview} />\n      )}\n      <div className=\"base-card\">\n        {reviews?.map((review) => {\n          return <MovieReview review={review} key={review.id} />;\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default MovieDetails;\n"],"mappings":";;;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AAGA,SAASC,WAAT,EAAsBC,cAAtB,QAA4C,qBAA5C;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,OAAO,cAAP;;;AAMA,MAAMC,YAAY,GAAG,MAAM;EAAA;;EACzB,MAAM;IAAEC;EAAF,IAAcP,SAAS,EAA7B;EACA,MAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,EAAlC;EACA,MAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAW,EAAX,CAAtC,CAHyB,CAKzB;;EACAD,SAAS,CAAC,MAAM;IACd,MAAMc,MAA0B,GAAG;MACjCC,MAAM,EAAE,KADyB;MAEjCC,GAAG,EAAG,WAAUP,OAAQ,EAFS;MAGjCQ,eAAe,EAAE;IAHgB,CAAnC;IAKAX,cAAc,CAACQ,MAAD,CAAd,CACGI,IADH,CACSC,QAAD,IAAc;MAClB,IAAIA,QAAQ,CAACC,IAAT,KAAkBC,SAAtB,EAAiC;QAC/BV,QAAQ,CAACQ,QAAQ,CAACC,IAAV,CAAR;MACD;IACF,CALH,EAMGE,KANH,CAMUC,KAAD,IAAW;MAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACD,CARH;EASD,CAfQ,EAeN,CAACd,OAAD,CAfM,CAAT,CANyB,CAuBzB;;EACAT,SAAS,CAAC,MAAM;IACd,MAAMc,MAA0B,GAAG;MACjCC,MAAM,EAAE,KADyB;MAEjCC,GAAG,EAAG,WAAUP,OAAQ,UAFS;MAGjCQ,eAAe,EAAE;IAHgB,CAAnC;IAKAX,cAAc,CAACQ,MAAD,CAAd,CAAuBI,IAAvB,CAA6BC,QAAD,IAAc;MACxCN,UAAU,CAACM,QAAQ,CAACC,IAAV,CAAV;IACD,CAFD;EAGD,CATQ,EASN,CAACX,OAAD,CATM,CAAT;;EAWA,MAAMiB,kBAAkB,GAAIC,MAAD,IAAoB;IAC7C,MAAMC,KAAK,GAAG,CAAC,GAAGhB,OAAJ,CAAd;IACAgB,KAAK,CAACC,IAAN,CAAWF,MAAX;IACAd,UAAU,CAACe,KAAD,CAAV;EACD,CAJD;;EAMA,oBACE;IAAK,SAAS,EAAC,aAAf;IAAA,wBACE,QAAC,aAAD;MAAe,KAAK,EAAElB;IAAtB;MAAA;MAAA;MAAA;IAAA,QADF,EAEGL,WAAW,CAAC,CAAC,aAAD,CAAD,CAAX,iBACC,QAAC,UAAD;MAAY,OAAO,EAAEI,OAArB;MAA8B,cAAc,EAAEiB;IAA9C;MAAA;MAAA;MAAA;IAAA,QAHJ,eAKE;MAAK,SAAS,EAAC,WAAf;MAAA,UACGd,OADH,aACGA,OADH,uBACGA,OAAO,CAAEkB,GAAT,CAAcH,MAAD,IAAY;QACxB,oBAAO,QAAC,WAAD;UAAa,MAAM,EAAEA;QAArB,GAAkCA,MAAM,CAACI,EAAzC;UAAA;UAAA;UAAA;QAAA,QAAP;MACD,CAFA;IADH;MAAA;MAAA;MAAA;IAAA,QALF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAaD,CAtDD;;GAAMvB,Y;UACgBN,S;;;KADhBM,Y;AAwDN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}